var mt=Object.defineProperty;var _t=(e,t,o)=>t in e?mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var ne=(e,t,o)=>(_t(e,typeof t!="symbol"?t+"":t,o),o);import{e as B,l as h,f as g,_ as N,j as a,s as Z,u as q,x as J,as as ue,y as ye,z as we,F as Q,k as F,t as ft,G as j,i as gt,S as vt,a as z,ay as bt,L as Ne,az as yt,W as Qe,aA as wt,ak as X,al as Pe,am as Ct,m as Te,q as ce,J as Le,aB as Ye,H as St,n as Me,ar as ie,w as et,a4 as tt,an as Mt,Z as st,ax as He,aC as kt,o as Tt,Q as Ke,aD as Et,A as $t,B as Ie,aE as It,aj as M}from"./seventv.index.3.0.9.js";import{d as xt,a as Rt,O as Dt,u as _e,b as Vt}from"./seventv.ReactHooks.3.0.9.js";import{g as Pt,d as Lt}from"./seventv.useModule.3.0.9.js";import{u as k,t as V,n as Ue,a as le,r as P,L as ke,m as nt,l as re,a9 as ge,b as fe,a5 as at,a8 as Ht}from"./seventv.useUserAgent.3.0.9.js";import{C as be,a as K,M as qe,b as Ot}from"./seventv.ChatMessage.3.0.9.js";import{u as de}from"./seventv.useChannelContext.3.0.9.js";import{u as ot}from"./seventv.useChatEmotes.3.0.9.js";import{u as Fe,a as it}from"./seventv.UiConfirmPrompt.3.0.9.js";import{u as Be,a as At,U as Nt,_ as Ut,B as Oe,t as Ft,b as Bt}from"./seventv.UserTag.3.0.9.js";import{a as Gt,_ as zt}from"./seventv.ChatData.vue_vue_type_script_setup_true_lang.3.0.9.js";import{b as rt,c as Wt,a as jt}from"./seventv.index.3.0.93.js";import{u as Yt}from"./seventv.main.3.0.9.js";import{n as Kt}from"./seventv.useCosmetics.3.0.9.js";import{c as qt,a as Zt}from"./seventv.Transform.3.0.9.js";import{i as Jt}from"./seventv.index.3.0.94.js";import{U as lt}from"./seventv.StarIcon.3.0.9.js";import{C as Xt}from"./seventv.CloseIcon.3.0.9.js";import{U as Qt}from"./seventv.UiFloating.3.0.9.js";import{v as es}from"./seventv.v4.3.0.9.js";const ts={class:"seventv-welcome-message"},ss=B({__name:"11.Connected",props:{msgData:{}},setup(e){return(t,o)=>(h(),g("span",ts," Welcome to the chat room! "))}});const ns=N(ss,[["__scopeId","data-v-39ca32ed"]]),as={},os={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-brand)"},is=a("g",null,[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z"})],-1),rs=[is];function ls(e,t){return h(),g("svg",os,rs)}const ct=N(as,[["render",ls]]),cs={},us={width:"20px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},ds=a("g",null,[a("path",{d:"M8.944 2.654c.406-.872 1.706-.872 2.112 0l1.754 3.77 4.2.583c.932.13 1.318 1.209.664 1.853l-3.128 3.083.755 4.272c.163.92-.876 1.603-1.722 1.132L10 15.354l-3.579 1.993c-.846.47-1.885-.212-1.722-1.132l.755-4.272L2.326 8.86c-.654-.644-.268-1.723.664-1.853l4.2-.583 1.754-3.77z"})],-1),hs=[ds];function ps(e,t){return h(),g("svg",us,hs)}const ut=N(cs,[["render",ps]]),ms=e=>(ye("data-v-bbc7f551"),e=e(),we(),e),_s={class:"seventv-sub-message-container seventv-highlight"},fs={class:"sub-part"},gs={class:"sub-message-icon"},vs={class:"sub-message-text"},bs={key:0,class:"sub-name bold"},ys=ms(()=>a("span",{class:"bold"},"Subscribed",-1)),ws=B({__name:"14.SubscriptionMessage",props:{msg:{},msgData:{}},setup(e){var d,i;const t=e,o=((d=t.msgData.methods)==null?void 0:d.plan)=="Prime"?"Prime":"Tier "+((i=t.msgData.methods)==null?void 0:i.plan.charAt(0));return(p,u)=>(h(),g("span",_s,[a("div",fs,[a("div",gs,[k(o)=="Prime"?(h(),Z(ct,{key:0})):(h(),Z(ut,{key:1}))]),a("div",vs,[p.msg.author?(h(),g("span",bs,V(p.msg.author.displayName),1)):q("",!0),ys,J(" with "+V(k(o))+". ",1)])]),p.msg.body?ue(p.$slots,"default",{key:0},void 0,!0):q("",!0)]))}});const Cs=N(ws,[["__scopeId","data-v-bbc7f551"]]),Ss=e=>(ye("data-v-e8a3b35a"),e=e(),we(),e),Ms={class:"seventv-sub-message-container seventv-highlight"},ks={class:"sub-part"},Ts={class:"sub-message-icon"},Es={class:"sub-message-text"},$s={key:0,class:"sub-name bold"},Is=Ss(()=>a("span",{class:"bold"},"Subscribed",-1)),xs={class:"bold"},Rs={key:0,class:"message-part"},Ds=B({__name:"15.Resubscription",props:{msgData:{}},setup(e){var d,i;const t=e,o=((d=t.msgData.methods)==null?void 0:d.plan)=="Prime"?"Prime":"Tier "+((i=t.msgData.methods)==null?void 0:i.plan.charAt(0));return(p,u)=>{var T;return h(),g("span",Ms,[a("div",ks,[a("div",Ts,[((T=p.msgData.methods)==null?void 0:T.plan)=="Prime"?(h(),Z(ct,{key:0})):(h(),Z(ut,{key:1}))]),a("div",Es,[p.msgData.user?(h(),g("span",$s,V(p.msgData.user.displayName),1)):q("",!0),Is,J(" with "+V(k(o))+". They've subscribed for ",1),a("span",xs,V(p.msgData.cumulativeMonths)+" months",1),p.msgData.shouldShareStreakTenure?(h(),g(Q,{key:1},[J(" , "+V(p.msgData.streakMonths)+" month"+V((p.msgData.streakMonths??0)>1?"s":"")+" in a row. ",1)],64)):(h(),g(Q,{key:2},[J("! ")],64))])]),p.msgData.message?(h(),g("div",Rs,[ue(p.$slots,"default",{},void 0,!0)])):q("",!0)])}}});const Vs=N(Ds,[["__scopeId","data-v-e8a3b35a"]]),Ps={},Ls={width:"25px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px",fill:"var(--color-fill-current)"},Hs=a("g",null,[a("path",{"fill-rule":"evenodd",d:"M16 6h2v6h-1v6H3v-6H2V6h2V4.793c0-2.507 3.03-3.762 4.803-1.99.131.131.249.275.352.429L10 4.5l.845-1.268a2.81 2.81 0 01.352-.429C12.969 1.031 16 2.286 16 4.793V6zM6 4.793V6h2.596L7.49 4.341A.814.814 0 006 4.793zm8 0V6h-2.596l1.106-1.659a.814.814 0 011.49.451zM16 8v2h-5V8h5zm-1 8v-4h-4v4h4zM9 8v2H4V8h5zm0 4H5v4h4v-4z","clip-rule":"evenodd"})],-1),Os=[Hs];function As(e,t){return h(),g("svg",Ls,Os)}const Ns=N(Ps,[["render",As]]),Us={class:"seventv-sub-message-container seventv-highlight"},Fs={class:"sub-part"},Bs={class:"gift-icon"},Gs={class:"sub-message-text"},zs={class:"sub-name bold"},Ws={class:"bold"},js={class:"bold"},Ys=B({__name:"21.SubGift",props:{msgData:{}},setup(e){return(t,o)=>{var d;return h(),g("span",Us,[a("div",Fs,[a("div",Bs,[F(Ns)]),a("div",Gs,[a("span",zs,V(t.msgData.user.displayName),1),J(" Gifted a "),a("span",Ws," Tier "+V((d=t.msgData.methods)==null?void 0:d.plan.charAt(0)),1),J(" sub to "),a("span",js,V(t.msgData.recipientDisplayName),1)])])])}}});const Ks=N(Ys,[["__scopeId","data-v-7102918b"]]),qs={class:"seventv-raid-message-container"},Zs=B({__name:"26.Raid",props:{msgData:{}},setup(e){return(t,o)=>(h(),g("span",qs,V(t.msgData.params.displayName)+" raided with a viewer count of "+V(t.msgData.params.viewerCount)+". ",1))}});const Js=N(Zs,[["__scopeId","data-v-39905dd5"]]),Xs={},Qs={alt:"mystery gift",class:"mystery-gift-theme__image",src:"https://static-cdn.jtvnw.net/subs-image-assets/gift-illus.png"};function en(e,t){return h(),g("img",Qs)}const tn=N(Xs,[["render",en]]),sn={class:"seventv-sub-message-container seventv-highlight"},nn={class:"sub-part"},an={class:"gift-icon"},on={class:"sub-message-text"},rn={class:"sub-name-big"},ln=B({__name:"35.SubMysteryGift",props:{msgData:{}},setup(e){return(t,o)=>(h(),g("span",sn,[a("div",nn,[a("div",an,[F(tn)]),a("div",on,[a("span",rn,V(t.msgData.user.displayName),1),J(" is gifting "+V(t.msgData.massGiftCount)+" Tier "+V(t.msgData.plan.charAt(0))+" Sub"+V(t.msgData.massGiftCount>1?"s":"")+" to "+V(t.msgData.channel)+"'s community. ",1),t.msgData.senderCount==t.msgData.massGiftCount?(h(),g(Q,{key:0},[J(" It's their first Gift Sub in the channel! ")],64)):(h(),g(Q,{key:1},[J(" They've gifted a total of "+V(t.msgData.senderCount)+" Subs in the channel! ",1)],64))])])]))}});const cn=N(ln,[["__scopeId","data-v-d3a2d72d"]]),un={},dn={type:"color-fill-current",width:"1em",height:"1em",version:"1.1",viewBox:"0 0 20 20",fill:"currentColor"},hn=a("g",null,[a("path",{d:"M10 6a4 4 0 014 4h-2a2 2 0 00-2-2V6z"}),a("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z","clip-rule":"evenodd"})],-1),pn=[hn];function mn(e,t){return h(),g("svg",dn,pn)}const _n=N(un,[["render",mn]]),fn={class:"seventv-reward-message-container seventv-highlight"},gn={key:0,class:"reward-part"},vn={class:"reward-left"},bn={class:"reward-username bold"},yn={class:"reward-name bold"},wn={class:"reward-cost bold"},Cn=["highlight"],Sn=B({__name:"43.PointsReward",props:{msg:{},msgData:{}},setup(e){return(t,o)=>(h(),g("span",fn,[t.msgData.reward?(h(),g("div",gn,[a("div",vn,[a("span",bn,V(t.msgData.displayName),1),J(" redeemed "),a("span",yn,V(t.msgData.reward.name),1)]),a("span",wn,[F(_n),a("span",null,V(t.msgData.reward.cost),1)])])):q("",!0),t.msgData.message?(h(),g("div",{key:1,class:"message-part",highlight:t.msgData.reward.isHighlighted},[ue(t.$slots,"default",{},void 0,!0)],8,Cn)):q("",!0)]))}});const Mn=N(Sn,[["__scopeId","data-v-397239f8"]]),kn={},Tn={fill:"var(--color-fill-current)",width:"18px",height:"20px",version:"1.1",viewBox:"0 0 20 20",x:"0px",y:"0px"},En=a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11 14l7 4V2l-7 4H4a2 2 0 00-2 2v4a2 2 0 002 2h2v4h2v-4h3zm1-6.268l4-2.286v9.108l-4-2.286V7.732zM10 12H4V8h6v4z"},null,-1),$n=[En];function In(e,t){return h(),g("svg",Tn,$n)}const xn=N(kn,[["render",In]]),Rn=e=>(ye("data-v-36fc91c5"),e=e(),we(),e),Dn={class:"announce-header"},Vn={class:"announce-icon"},Pn=Rn(()=>a("div",{class:"announce-title"},"Announcement",-1)),Ln={class:"announce-message"},Hn=B({__name:"49.AnnouncementMessage",props:{msgData:{}},setup(e){const t=e,o=de(),d=Be(o),i="announcement-line--"+(t.msgData.color=="PRIMARY"&&d.primaryColorHex==null?"purple":t.msgData.color.toLowerCase());return(p,u)=>(h(),g("div",{class:Ue(["seventv-announce-message-container",i])},[a("div",Dn,[a("div",Vn,[F(xn)]),Pn]),a("div",Ln,[ue(p.$slots,"default",{},void 0,!0)])]))}});const On=N(Hn,[["__scopeId","data-v-36fc91c5"]]);function An(e){const t=e;return Array.isArray(t.messageParts)&&typeof t.messageType=="number"}function Nn(e){const t=e;return Array.isArray(t.messageParts)||typeof t.message=="object"}function Un(e){return typeof e.moderationType=="number"}const Ze=new Map;function Je(e,t=!0){const o=t?Ze.get(e)||Ze.set(e,new Audio(e)).get(e):new Audio(e),d=(p=1)=>{o.volume=p,o.play()},i=()=>o.pause();return ft(()=>{o.remove()}),{play:d,stop:i,audio:o}}const Xe=new WeakMap,xe=j("highlights.custom"),Fn=j("highlights.sound_volume");function dt(e){const t=rt(),o=gt(vt,""),d=le({ping:Je(o+"/sound/ping.ogg")});let i=Xe.get(e);i||(i=le({highlights:{}}),z(xe,l=>{if(i){for(const[s,y]of Object.entries(i.highlights))y.persist&&delete i.highlights[s];for(const[,s]of l)i.highlights[s.id]=s,T(s),L(s)}},{immediate:!0}),Xe.set(e,i));const p=xt(function(){if(!i)return;const l=Array.from(Object.values(i.highlights)).filter(s=>s.persist).map(s=>[s.id,ke({...s,soundFile:ke(s.soundFile),soundDef:void 0,flashTitleFn:void 0})]);xe.value=new Map(l)},250);function u(l,s,y){if(!i)return{};const H=i.highlights[l]={...s,id:l,persist:y};return T(H),y&&(xe.value.set(l,nt(H)),p()),H}function T(l){var H;if(!l.soundFile){(H=l.soundPath)!=null&&H.startsWith("#")&&d[l.soundPath.slice(1)]&&(l.soundDef=d[l.soundPath.slice(1)]);return}const s=new Blob([l.soundFile.data],{type:l.soundFile.type}),y=URL.createObjectURL(s);return l.soundPath=y,l.soundDef=Je(y),y}function L(l){l.flashTitleFn=l.flashTitle?()=>` ðŸ’¬ Highlight: ${l.label||l.pattern}`:void 0}function v(l){i&&(delete i.highlights[l],p())}function E(l,s){if(!i)return!1;const y=i==null?void 0:i.highlights[l];if(!y)return!1;let H=!1;if(y.regexp){let W=y.cachedRegExp;if(!W)try{W=new RegExp(y.pattern,"i"),Object.defineProperty(y,"cachedRegExp",{value:W})}catch(S){return re.warn("<ChatHighlights>","Invalid regexp:",y.pattern??""),s.setHighlight("#878787","Error "+S.message),!1}H=W.test(s.body)}else y.pattern?H=y.caseSensitive?s.body.includes(y.pattern):s.body.toLowerCase().includes(y.pattern.toLowerCase()):typeof y.test=="function"&&(H=y.test(s));return H&&(s.setHighlight(y.color,y.label),y.soundDef&&!s.historical&&y.soundDef.play(Fn.value/100),y.flashTitleFn&&!s.historical&&R(y,s)),H}const I=P(""),_=P(document.title);let x=0;const b=bt(()=>{Wt(x++%2===0?I.value:_.value)},1e3,{immediate:!1,immediateCallback:!0});function R(l,s){!l.flashTitleFn||b.isActive.value||(_.value=document.title,I.value=l.flashTitleFn(s),b.resume(),Ne(t).toBe("visible").then(()=>{b.pause(),I.value="",document.title=_.value}))}function m(){return i?yt(i.highlights):{}}function C(l,s){if(!i)return;const y=i.highlights[l];y&&(i.highlights[s]=y,delete i.highlights[l],y.id=s,p())}return{define:u,remove:v,getAll:m,save:p,updateId:C,checkMatch:E,updateSoundData:T,updateFlashTitle:L}}const Bn=["id"],Gn=B({__name:"ChatMessageUnhandled",props:{msg:{}},setup(e){const t=e,o=P(null);return Qe(()=>{!o.value||!t.msg.wrappedNode||o.value.appendChild(t.msg.wrappedNode)}),(d,i)=>(h(),g("span",{id:d.msg.id,ref_key:"msgContainer",ref:o,class:"seventv-unhandled-message-ref"},null,8,Bn))}}),ve=300,zn=40,Re=80,Wn=1209600;function jn(e){return e<60?`${Math.round(e)} seconds`:e<60*60?`${Math.round(e/60)} minutes`:e<60*60*24?`${Math.round(e/(60*60))} hours`:`${Math.round(e/(60*60*24))} days`}class Yn{constructor(t=!1){ne(this,"command","");ne(this,"banDuration",null);ne(this,"text","");ne(this,"time",0);ne(this,"banVis",0);ne(this,"unbanVis",0);ne(this,"color","");ne(this,"pos","0px");this.isActor=t}secondsToBanDuration(t){const o=Jt({start:0,end:t*1e3});return"".concat(o.seconds?`${o.seconds}s`:"",o.days?`${o.days}d`:"",o.hours?`${o.hours}h`:"",o.minutes?`${o.minutes}m`:"")}calculate(t){if(this.pos=`${this.isActor?Math.max(0,t):t}px`,t<-40&&!this.isActor)this.command="unban",this.unbanVis=1;else if(t<zn){this.command="",this.text="",this.color="";return}else if(t<Re)this.command="delete",this.text="Delete",this.color="#FFFF00",this.banVis=1;else if(t<ve&&!this.isActor){const o=Math.pow((t+.25*ve-Re)/(1.25*ve-Re),10)*Wn;this.command="ban",this.banDuration=this.secondsToBanDuration(Math.round(o))||"14d",this.text=String(jn(o)),this.color="#FFA500",this.banVis=1}else t>=ve&&!this.isActor&&(this.command="ban",this.banDuration=null,this.text="Ban",this.color="#C40000",this.banVis=1)}}const Kn=e=>(ye("data-v-e548bb3d"),e=e(),we(),e),qn={class:"grabbable-wrapper"},Zn=Kn(()=>a("div",{class:"grabbable-inner"},[a("div",{class:"dots"})],-1)),Jn=[Zn],Xn={class:"wrapped"},Qn=B({__name:"ModSlider",props:{msg:{}},setup(e){var x,b;const t=e,o=de(),d=At(o,((x=t.msg.author)==null?void 0:x.username)??""),i=P(!1),p=P(!1),u=le(new Yn(((b=t.msg.author)==null?void 0:b.isActor)??!1)),T=ge(u,"pos");let L=0;const v=P(!1);z(()=>[o.actor.roles.has("MODERATOR")],R=>{v.value=R.every(m=>m)},{immediate:!0});const E=R=>{R.stopPropagation(),L=R.pageX,p.value=!0,R.target.setPointerCapture(R.pointerId)},I=R=>{var m;if(p.value=!1,u.command&&t.msg.author)switch(u.command){case"ban":d.banUserFromChat(((m=u.banDuration)==null?void 0:m.toString())??null);break;case"unban":d.unbanUserFromChat();break;case"delete":d.deleteChatMessage(t.msg.id);break}i.value=!0,setTimeout(()=>i.value=!1,300),u.calculate(0),R.target.releasePointerCapture(R.pointerId)},_=R=>{if(!p.value)return;R.preventDefault();const m=Math.max(Math.min(R.pageX-L,ve),-60);u.calculate(m)};return(R,m)=>v.value?(h(),g("div",{key:0,class:"seventv-ban-slider",style:fe({transform:"translateX("+T.value+")",transition:i.value?"transform 0.3s ease":"none",boxShadow:p.value?"black 0px 0.1rem 0.2rem":"none"})},[a("div",{class:"ban-background",style:fe({backgroundColor:u.color,width:T.value})},[a("span",{class:"text",style:fe({opacity:u.banVis})},V(u.text),5)],4),a("div",qn,[a("div",{class:"grabbable-outer",onPointerdown:E,onPointerup:I,onPointermove:_},Jn,32)]),a("div",Xn,[ue(R.$slots,"default",{},void 0,!0)]),a("div",{class:"unban-background",style:fe({width:"calc(-1 *"+T.value+")"})},[a("span",{class:"text",style:fe({opacity:u.unbanVis})}," Unban ",4)],4)],4)):ue(R.$slots,"default",{key:1},void 0,!0)}});const ea=N(Qn,[["__scopeId","data-v-e548bb3d"]]),ta=["alternating-background"],sa=["msg-id"],na=B({__name:"ChatList",props:{list:{},messageHandler:{}},setup(e,{expose:t}){const o=e,d=de(),{identity:i}=wt(Yt()),p=ot(d),u=Fe(d),T=ge(u,"displayed"),L=it(d),v=Be(d),E=dt(d),I=rt(),_=ge(v,"hovering"),x=P(!1),b=j("chat.mod_slider"),R=j("chat.mod_messages"),m=j("chat.alternating_background"),C=j("highlights.basic.mention"),l=j("highlights.basic.first_time_chatter"),s=j("highlights.basic.self"),y=j("highlights.basic.mention_sound"),H=j("highlights.basic.mention_title_flash"),W=j("highlights.basic.restricted_low_trust_user"),S=ge(o,"messageHandler"),Ce=ge(o,"list"),he=P(),Ee=Object.assign({"/src/app/chat/msg/0.NormalMessage.vue":Ut,"/src/app/chat/msg/11.Connected.vue":ns,"/src/app/chat/msg/14.SubscriptionMessage.vue":Cs,"/src/app/chat/msg/15.Resubscription.vue":Vs,"/src/app/chat/msg/21.SubGift.vue":Ks,"/src/app/chat/msg/26.Raid.vue":Js,"/src/app/chat/msg/35.SubMysteryGift.vue":cn,"/src/app/chat/msg/43.PointsReward.vue":Mn,"/src/app/chat/msg/49.AnnouncementMessage.vue":On,"/src/app/chat/msg/BasicSystemMessage.vue":Oe,"/src/app/chat/msg/EmoteSetUpdateMessage.vue":Gt}),oe={},Se=/src\/app\/chat\/msg\/(\d+)\.(\w+)\.vue$/;for(const[n,r]of Object.entries(Ee)){const[,f]=n.match(Se)??[];if(!f)continue;const U=parseInt(f);Number.isNaN(U)||(oe[U]=r)}function $e(n){return oe[n]??null}const pe=n=>{const r=new be(n.id);switch(r.channelID=d.id,n.type){case K.MESSAGE:case K.SUBSCRIPTION:case K.RESUBSCRIPTION:case K.SUB_GIFT:case K.RAID:case K.SUB_MYSTERY_GIFT:case K.CHANNEL_POINTS_REWARD:case K.ANNOUNCEMENT_MESSAGE:case K.RESTRICTED_LOW_TRUST_USER_MESSAGE:case K.CONNECTED:me(r,n);break;case K.MODERATION:if(!Un(n))break;c(n);break;case K.MESSAGE_ID_UPDATE:w(n);break;default:return!1}return u.handlers.forEach(f=>f(n)),!0};function me(n,r,f=!0){var te,se,ae,Ge,ze,We,je;const U=$e(r.type);U&&n.setComponent(U,{msgData:r}),n.instance||n.setComponent(oe[0],{msgData:r}),r.type===K.RESTRICTED_LOW_TRUST_USER_MESSAGE&&W.value&&n.setHighlight("#ff7d00","Restricted Suspicious User");const D=r.user??((te=r.message)==null?void 0:te.user)??null;if(D){const G=u.chatters[D.userID],O=D.color?v.useHighContrastColors?Kt(D.color,v.isDarkTheme):D.color:null;if(G&&(G.username=D.userLogin,G.displayName=D.userDisplayName??D.displayName??D.userLogin,G.color=O??G.color,G.intl=D.isIntl),n.setAuthor(G??{id:D.userID,username:D.userLogin??((se=D.userDisplayName??D.displayName)==null?void 0:se.toLowerCase()),displayName:D.userDisplayName??D.displayName??D.userLogin,color:O}),n.author&&v.blockedUsers.has(n.author.id)){if(!d.actor.roles.has("MODERATOR")){re.debug("Ignored message from blocked user",n.author.id);return}n.setHighlight("#9488855A","You Blocked This User")}i.value&&n.author&&n.author.id===i.value.id&&(n.author.isActor=!0),n.badges=r.badges??((ae=r.message)==null?void 0:ae.badges)??{}}if(Nn(r)){if(n.body=(r.messageBody??((Ge=r.message)==null?void 0:Ge.messageBody)??"").replace(`
`," "),typeof r.nonce=="string"&&n.setNonce(r.nonce),r.isFirstMsg&&l.value?n.setHighlight("#c832c8","First Message"):r.isReturningChatter&&n.setHighlight("#3296e6","Returning Chatter"),r.reply){const G=r.reply.parentUserLogin&&r.reply.parentDisplayName?{username:r.reply.parentUserLogin,displayName:r.reply.parentDisplayName}:null;n.parent={id:r.reply.parentMsgId,uid:r.reply.parentUid,deleted:r.reply.parentDeleted,body:r.reply.parentMessageBody,author:G},E.checkMatch("~reply",n)}r.messageType===1&&(n.slashMe=!0);for(const G of r.messageParts??((ze=r.message)==null?void 0:ze.messageParts)??[])switch(G.type){case qe.EMOTE:{const O=G.content;if(!O.alt||(We=O.emoteID)!=null&&We.startsWith("__FFZ__")||(je=O.emoteID)!=null&&je.startsWith("__BTTV__"))continue;n.nativeEmotes[O.alt+(O.cheerAmount??"")]={id:O.emoteID??"",name:O.alt,flags:0,provider:"PLATFORM",isTwitchCheer:{amount:O.cheerAmount,color:O.cheerColor},data:O.cheerAmount?qt({alt:O.alt,cheerAmount:O.cheerAmount,cheerColor:O.cheerColor,images:O.images}):Zt({id:O.emoteID,token:O.alt})};break}case qe.FLAGGEDSEGMENT:{const O=G;if(!O.originalText)continue;n.body=n.body.replace(O.originalText,"*".repeat(O.originalText.length));break}}}if(r.nonce){n.setDeliveryState("IN_FLIGHT");const{stop:G}=St(()=>{n.setDeliveryState("BOUNCED")},1e4);Ne(P(n.deliveryState)).toBe("SENT").then(G)}An(r)?n.setTimestamp(r.timestamp):r.message&&n.setTimestamp(r.message.timestamp??0);for(const G in E.getAll())E.checkMatch(G,n);d.actor.roles.has("MODERATOR")&&(n.pinnable=!0,n.deletable=!0),f&&u.add(n)}function c(n){if(n.moderationType===Ot.DELETE){const r=u.find(f=>f.id==n.targetMessageID);r&&(r.moderation.deleted=!0)}else{const r=u.moderated[0];if(r&&r.victim&&r.victim.username===n.userLogin&&r.mod.banDuration===n.duration)return;const f=u.messagesByUser(n.userLogin),U={actionType:n.duration>0?"TIMEOUT":"BAN",banDuration:n.duration,banReason:n.reason,actor:null,banned:!0,deleted:!1,timestamp:Date.now()};let D=null;for(const te of f)te.moderation=U,D||(D=te.author);if(u.moderated.unshift({id:Symbol("seventv-moderation-message"),messages:f.reverse().slice(0,10),mod:U,victim:D||{id:n.userLogin,username:n.userLogin,displayName:n.userLogin,color:""}}),u.moderated.length>125&&Me(()=>{for(;u.moderated.length>100;)u.moderated.pop()}),R.value&&!d.actor.roles.has("MODERATOR")){const te=new be().setComponent(Oe,{text:n.userLogin+(n.duration>0?` was timed out (${n.duration}s)`:" was permanently banned")});u.add(te)}}}function w(n){const r=u.find(f=>f.nonce==n.nonce);r&&(r.setID(n.id),r.setDeliveryState("SENT"))}z(S,(n,r)=>{n!==r&&r?X(r,"handleMessage"):n&&Pe(n,"handleMessage",function(f,U){return pe(U)?"":($.set(U.id,U),f==null?void 0:f.call(this,U))})},{immediate:!0});const $=le(new Map),A=new Map;Ct(Ce.value.domNodes,n=>{const r=new Set(A.keys());for(const[f,U]of Object.entries(n)){if(f==="root"||(r.delete(f),A.has(f)||!$.has(f)))continue;const D=new be(f+"-unhandled");D.wrappedNode=U,u.add(D),A.set(f,U)}for(const f of r)A.delete(f)},{debounce:100,immediate:!0});const{alt:ee}=jt();let Y=!1;return z([ee,_],([n,r])=>{L.paused?Y&&(L.unpause(),Y=!1):(r&&v.pauseReason.has("MOUSEOVER")||r&&n&&v.pauseReason.has("ALTKEY"))&&(L.pause(),Y=!0)}),z([i,s],([n,r])=>{r&&n?E.define("~self",{test:f=>!!(f.author&&n)&&f.author.id===n.id,label:"You",color:"#3ad3e0"}):E.remove("~self")},{immediate:!0}),z(I,n=>{n==="hidden"&&!L.paused?(L.pause(),x.value=!0):x.value&&(L.unpause(),x.value=!1)}),z([i,C,y,H],([n,r,f,U])=>{const D=n?`\\b${n.username}\\b`:null;if(!D)return;const te=new RegExp(D,"i");r?(E.define("~mention",{pattern:D,regexp:!0,cachedRegExp:te,label:"Mentions You",color:"#e13232",soundPath:f?"#ping":void 0,flashTitleFn:U?se=>{var ae;return`ðŸ”” @${((ae=se.author)==null?void 0:ae.username)??"A user"} mentioned you`}:void 0,flashTitle:!0}),E.define("~reply",{test:se=>!!(se.parent&&se.parent.author&&te.test(se.parent.author.username)),label:"Replying to You",color:"#e13232",soundPath:f?"#ping":void 0,flashTitleFn:U?se=>{var ae;return`ðŸ”” @${((ae=se.author)==null?void 0:ae.username)??"A user"} replied to you`}:void 0,flashTitle:!0})):(E.remove("~mention"),E.remove("~reply"))},{immediate:!0}),t({onMessage:pe,onChatMessage:me}),(n,r)=>(h(),g("main",{ref_key:"chatListEl",ref:he,class:"seventv-chat-list","alternating-background":k(m)},[(h(!0),g(Q,null,Te(T.value,f=>(h(),g("div",{key:f.sym,"msg-id":f.id,class:"seventv-message"},[f.instance?(h(),Z(Le(k(b)&&k(d).actor.roles.has("MODERATOR")&&f.author?ea:"span"),at(Ye({key:0},{msg:f})),{default:ce(()=>[(h(),Z(Le(f.instance),Ye(f.componentProps,{msg:f}),{default:ce(()=>[F(Nt,{msg:f,emotes:k(p).active,chatters:k(u).chattersByUsername},null,8,["msg","emotes","chatters"])]),_:2},1040,["msg"]))]),_:2},1040)):(h(),Z(Gn,{key:1,msg:f},null,8,["msg"]))],8,sa))),128))],8,ta))}});const aa=N(na,[["__scopeId","data-v-bbff945d"]]),oa={},ia={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",fill:"currentColor",width:"1em",height:"1em"},ra=a("path",{d:"M128 64H0V448H128V64zm192 0H192V448H320V64z"},null,-1),la=[ra];function ca(e,t){return h(),g("svg",ia,la)}const ua=N(oa,[["render",ca]]),Ae=P(null),ht=P(null);ie(window,"__Twitch__pubsubInstances",{value(e){!e||!e.production||!e.production._client||(Ae.value=e.production._client,ie(Ae.value,"_primarySocket",{value(t){!t||!t._socket||(ht.value=t._socket)}}))}});function da(){return le({client:Ae,socket:ht})}const ha=B({__name:"ChatPubSub",setup(e){const t=de(),o=Fe(t),d=da(),i=j("highlights.basic.monitored_low_trust_user");et(()=>{d.socket&&(d.socket.removeEventListener("message",p),d.socket.addEventListener("message",p))});function p(v){let E;try{E=JSON.parse(v.data)}catch(R){re.error("Failed to parse pubsub message",R.message);return}if(E.type!=="MESSAGE")return;const{topic:I,message:_}=E.data??{};if(typeof I!="string"||typeof _!="string"){re.warn("received an invalid pubsub message");return}const{type:x,data:b}=JSON.parse(_??{});switch(x){case"low_trust_user_new_message":u(b);break;case"moderation_action":T(b);break;case"chat_rich_embed":L(b);break}}async function u(v){if(!v.low_trust_user||!i.value)return;const I=await o.awaitMessage(v.message_id).catch(_=>{re.debug("failed to find new message for low trust user",_.message)});I&&I.setHighlight("#ff7d00","Monitored Suspicious User")}async function T(v){const E=v.moderation_action;if(E)switch(E){case"ban":case"timeout":{const I=o.messagesByUser(v.target_user_login);if(!I)return;const _=v.args[1]||null,x=v.args[2]??"";for(const b of I)b.moderation.banReason=x,b.moderation.actor=v.created_by_user_id?{id:v.created_by_user_id,username:v.created_by??"",displayName:v.created_by??"",color:""}:null,b.moderation.banDuration=_?parseInt(_):null,b.moderation.banned=!0;break}}}async function L(v){if(!v.twitch_metadata)return;const I=await o.awaitMessage(v.message_id).catch(C=>{re.debug("failed to find new message for chat rich embed",C.message)});if(!I)return;const{title:_,author_name:x,request_url:b,thumbnail_url:R,twitch_metadata:m}=v;I.richEmbed.title=_,I.richEmbed.author_name=x,I.richEmbed.request_url=b,I.richEmbed.thumbnail_url=R,I.richEmbed.twitch_metadata=m}return tt(()=>{d.socket&&d.socket.removeEventListener("message",p)}),(v,E)=>null}}),pa=B({__name:"ChatTray",setup(e){return(t,o)=>(h(!0),g(Q,null,Te(k(Ft),({parent:d,component:i,props:p},u)=>(h(),g(Q,{key:u},[d.current?(h(),Z(st,{key:0,to:d.current},[(h(),Z(Le(i),at(Mt(p)),null,16))],8,["to"])):q("",!0)],64))),128))}}),ma={id:"seventv-message-container",class:"seventv-message-container"},_a=B({__name:"ChatController",props:{controller:{},room:{},list:{},buffer:{},events:{}},setup(e){const t=e,o=Pt("chat"),{sendMessage:d}=Ke(),{list:i,controller:p,room:u}=Ht(t),T=document.createElement("seventv-container");T.id="seventv-chat-controller";const L=P(),v=P(T),E=P(null),I=P(T.getBoundingClientRect()),_=P(),x=P(""),b=de(t.controller.component.props.channelID,!0),R=Ke(),m=ot(b),C=Fe(b),l=it(b,{scroller:_,bounds:I}),s=Be(b),y=Bt(b),H=j("chat.line_limit",150),W=j("chat.ignore_clear_chat"),S=P(null);et(()=>{if(!i.value||!i.value.domNodes)return;const c=i.value.domNodes.root;c&&(c.classList.add("seventv-chat-list"),v.value=c)});const Ce=P(null);z(i,(c,w)=>{if(!(!c||!c.component)){if(w&&w.component&&c!==w){X(w.component,"props");return}ie(c.component,"props",{value($){var ee,Y;Ce.value=$.messageHandlerAPI;const A=(ee=$.children[0])==null?void 0:ee.props;(Y=A==null?void 0:A.badgeSets)!=null&&Y.count&&(s.twitchBadgeSets=A.badgeSets)}})}},{immediate:!0});const he=P([]),Ee=He(he,1e3);z(Ee,async c=>{if(c.length)for(const w of he.value)w.id==="FrankerFaceZWasHere"||w.id==="BETTERTTV_EMOTES"||d("SYNC_TWITCH_SET",{input:ke(w)})}),z(u,(c,w)=>{!c||!c.component||(w&&w.component&&c!==w&&X(w.component,"props"),ie(u.value.component,"props",{value($){switch(s.primaryColorHex=$.primaryColorHex,x.value=`#${$.primaryColorHex??"755ebc"}`,document.body.style.setProperty("--seventv-channel-accent",x.value),s.useHighContrastColors=$.useHighContrastColors,s.showTimestamps=$.showTimestamps,s.showModerationIcons=$.showModerationIcons,s.pauseReason.clear(),s.pauseReason.add("SCROLL"),$.chatPauseSetting){case"MOUSEOVER_ALTKEY":s.pauseReason.add("ALTKEY"),s.pauseReason.add("MOUSEOVER");break;case"MOUSEOVER":s.pauseReason.add("MOUSEOVER");break;case"ALTKEY":s.pauseReason.add("ALTKEY");break}}}))},{immediate:!0}),ie(p.value.component,"props",{value(c){c.channelID&&(S.value={id:c.channelID,username:c.channelLogin,displayName:c.channelDisplayName,active:!0});for(const[$,A]of[["VIP",c.isCurrentUserVIP],["EDITOR",c.isCurrentUserEditor],["MODERATOR",c.isCurrentUserModerator||c.channelID===c.userID],["BROADCASTER",c.channelID===c.userID]])A&&b.actor.roles.add($);s.isDarkTheme=c.theme,C.sendMessage=c.chatConnectionAPI.sendMessage,Pe(c.chatConnectionAPI,"sendMessage",function($,...A){var ee;R.sendMessage("CHANNEL_ACTIVE_CHATTER",{channel:ke(b.base)});for(const Y of((ee=o.instance)==null?void 0:ee.messageSendMiddleware.values())??[])A[0]=Y(A[0]);return $==null?void 0:$.apply(this,A)});const w=c.emoteSetsData;!w||w.loading||(he.value=w.emoteSets)}});const oe=Rt({parentSelector:".stream-chat",predicate:c=>c.props&&(c.props.onShowViewerCard||c.openUserCard)});oe.then(([c])=>{c&&y.update("TWITCH","onShowViewerCard",c.props.onShowViewerCard??c.openUserCard)},()=>null),oe instanceof Dt&&Ne(kt(1e4)).toBeTruthy().then(()=>oe.disconnect());const Se=P(null),$e=He(Se,100);z($e,(c,w)=>{w&&c!==w?(X(w,"buffer"),X(w,"blockedUsers")):c&&(ie(c,"buffer",{value($){var ee;if(!$.length)return;const A=[];for(const Y of $){const n=new be(Y.id);if(Y.isHistorical||Y.type===K.CONNECTED){n.historical=!0,(ee=L.value)==null||ee.onChatMessage(n,Y,!1),A.push(n);continue}}C.displayed=A.concat(C.displayed),Me(()=>{l.scrollToLive(0),X(c,"buffer")})}}),ie(c,"blockedUsers",{value($){s.blockedUsers=$}}))}),z(S,c=>{!c||!b.setCurrentChannel(c)||(C.clear(),l.unpause(),Me(()=>m.resetProviders()))},{immediate:!0}),z(()=>t.buffer,c=>{const w=c==null?void 0:c.component;w&&(Se.value=w)},{immediate:!0});const pe=P(null);z(()=>t.events,c=>{!c||!c.component||(pe.value=c.component)},{immediate:!0}),z(pe,(c,w)=>{w&&X(w,"onClearChatEvent"),c&&Pe(c,"onClearChatEvent",$=>{const A=new be().setComponent(Oe,{text:W.value?"Chat clear prevented by 7TV":"Chat cleared by a moderator"});return W.value||C.clear(),C.add(A),$==null?void 0:$.apply(this,[{channel:""}])})},{immediate:!0});const me=new ResizeObserver(()=>{I.value=v.value.getBoundingClientRect()});return me.observe(v.value),Tt(()=>{C.clear()}),tt(()=>{me.disconnect(),T.remove(),E.value&&E.value.classList.remove("seventv-checked"),re.debug("<ChatController> Unmounted"),X(p.value.component,"props"),i.value&&(X(i.value.component.props,"messageHandlerAPI"),X(i.value.component,"props")),u.value&&X(u.value.component,"props"),document.body.style.removeProperty("--seventv-channel-accent")}),(c,w)=>(h(),g(Q,null,[k(b).id?(h(),Z(st,{key:0,to:v.value},[F(lt,{ref_key:"scrollerRef",ref:_,class:"seventv-chat-scroller",onContainerScroll:k(l).onScroll,onContainerWheel:k(l).onWheel,onMouseenter:w[1]||(w[1]=$=>k(s).hovering=!0),onMouseleave:w[2]||(w[2]=$=>k(s).hovering=!1)},{default:ce(()=>[a("div",ma,[F(aa,{ref_key:"chatList",ref:L,list:k(i),"message-handler":Ce.value},null,8,["list","message-handler"])]),k(l).paused?(h(),g("div",{key:0,class:"seventv-message-buffer-notice",onClick:w[0]||(w[0]=(...$)=>k(l).unpause&&k(l).unpause(...$))},[F(ua),k(l).pauseBuffer.length?(h(),g("span",{key:0,class:Ue({capped:k(l).pauseBuffer.length>=k(H)})},V(k(l).pauseBuffer.length),3)):q("",!0),a("span",null,V(k(l).pauseBuffer.length>0?"new messages":"Chat Paused"),1)])):q("",!0)]),_:1},8,["onContainerScroll","onContainerWheel"]),k(b).loaded?(h(),Z(zt,{key:0})):q("",!0)],8,["to"])):q("",!0),F(pa),F(ha)],64))}});const fa=["checked"],De=B({__name:"FormCheckbox",props:{checked:{type:Boolean}},emits:["update:checked","update:modelValue"],setup(e,{emit:t}){function o(d){const i=d.target.checked;t("update:checked",i),t("update:modelValue",i)}return(d,i)=>(h(),g("div",null,[a("input",{id:"checkbox",checked:d.checked,type:"checkbox",onChange:o},null,40,fa)]))}}),ga=["type","error","autofocus","value","placeholder"],va=B({__name:"FormInput",props:{label:{},modelValue:{},type:{default:"text"},icon:{},error:{type:Boolean},width:{},appearance:{default:"outline"},autofocus:{type:Boolean}},emits:["update:modelValue","blur"],setup(e,{expose:t,emit:o}){const d=e;Et(u=>({"46d8f494":u.width}));const i=u=>o("update:modelValue",u.target.value),p=P(null);return t({focus:()=>{var u;return(u=p.value)==null?void 0:u.focus()}}),Qe(()=>{p.value&&d.autofocus&&p.value.focus()}),(u,T)=>(h(),g("input",{ref_key:"inputEl",ref:p,type:u.type,error:u.error,autofocus:u.autofocus,value:u.modelValue,placeholder:u.label,onInput:i,onBlur:T[0]||(T[0]=L=>o("blur"))},null,40,ga))}});const Ve=N(va,[["__scopeId","data-v-09ac3f20"]]),ba={},ya={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"currentColor",width:"1em",height:"1em"},wa=a("path",{d:"M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 32a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm-96-32a96 96 0 1 0 192 0 96 96 0 1 0 -192 0zM96 240c0-35 17.5-71.1 45.2-98.8S205 96 240 96c8.8 0 16-7.2 16-16s-7.2-16-16-16c-45.4 0-89.2 22.3-121.5 54.5S64 194.6 64 240c0 8.8 7.2 16 16 16s16-7.2 16-16z"},null,-1),Ca=[wa];function Sa(e,t){return h(),g("svg",ya,Ca)}const Ma=N(ba,[["render",Sa]]),pt=e=>(ye("data-v-a22bf14e"),e=e(),we(),e),ka={class:"seventv-settings-custom-highlights"},Ta=pt(()=>a("div",{class:"tabs"},null,-1)),Ea={class:"list"},$a=pt(()=>a("div",{class:"item heading"},[a("div",null,"Pattern"),a("div",null,"Label"),a("div",{class:"centered"},"Flash Title"),a("div",{class:"centered"},"RegExp"),a("div",null,"Case Sensitive"),a("div",null,"Color")],-1)),Ia=["onClick"],xa=["onClick"],Ra={name:"flash-title",class:"centered"},Da={name:"is-regexp",class:"centered"},Va={name:"case-sensitive",class:"centered"},Pa={name:"color"},La=["onUpdate:modelValue","onInput"],Ha={class:"sound-options"},Oa=["active","onClick"],Aa=["active","onClick"],Na=["active"],Ua={key:0},Fa=["onInput"],Ba={class:"item create-new"},Ga={name:"pattern"},za=B({__name:"SettingsConfigHighlights",setup(e){const t=de(),o=dt(t),d=P(""),i=le({pattern:new WeakMap,label:new WeakMap}),p=P();function u(m,C){const l=i[C].get(m);l&&l.focus()}function T(m,C){if(!i[C].get(m))return;const s=es();o.updateId("new-highlight",s),o.save()}function L(m,C){m.flashTitle=C,o.updateFlashTitle(m),o.save()}function v(m,C){m.regexp=C,o.save()}function E(m,C){m.caseSensitive=C,o.save()}function I(m,C){if(!(C.target instanceof HTMLInputElement))return;const l=C.target.value;m.color=l,o.save()}function _(m,C){var y;if(!(C.target instanceof HTMLInputElement))return;const l=(y=C.target.files)==null?void 0:y[0];if(!l)return;const s=new FileReader;s.onload=H=>{if(!(H.target instanceof FileReader))return;const W=H.target.result;if(W instanceof ArrayBuffer){if(W.byteLength>50*1024)return alert("File is too large! (max 50KB)");delete m.soundPath,m.soundFile={name:l.name,type:l.type,data:W},o.updateSoundData(m),o.save()}},C.target.value="",s.readAsArrayBuffer(l)}function x(m){delete m.soundFile,delete m.soundDef,m.soundPath="#ping",o.save()}function b(m){delete m.soundFile,delete m.soundPath,delete m.soundDef,o.updateSoundData(m),o.save()}function R(m){o.remove(m.id),o.save()}return z(d,(m,C)=>{if(!m||C)return;const l=o.define("new-highlight",{color:"#8803fc",label:"",pattern:m},!0);Me(()=>{const s=i.pattern.get(l);s&&(s.focus(),d.value="")})}),(m,C)=>{const l=$t("tooltip");return h(),g("main",ka,[Ta,a("div",Ea,[$a,F(lt,null,{default:ce(()=>[(h(!0),g(Q,null,Te(k(o).getAll(),(s,y,H)=>{var W;return h(),g("div",{key:s.id,class:"item"},[a("div",{name:"pattern",class:"use-virtual-input",tabindex:"0",onClick:S=>u(s,"pattern")},[a("span",null,V(s.pattern),1),F(Ve,{ref_for:!0,ref:S=>i.pattern.set(s,S),modelValue:s.pattern,"onUpdate:modelValue":S=>s.pattern=S,onBlur:S=>T(s,"pattern")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,Ia),a("div",{name:"label",class:"use-virtual-input",tabindex:"0",onClick:S=>u(s,"label")},[a("span",null,V(s.label),1),F(Ve,{ref_for:!0,ref:S=>i.label.set(s,S),modelValue:s.label,"onUpdate:modelValue":S=>s.label=S,onBlur:S=>T(s,"label")},null,8,["modelValue","onUpdate:modelValue","onBlur"])],8,xa),a("div",Ra,[F(De,{checked:!!s.flashTitle,"onUpdate:checked":S=>L(s,S)},null,8,["checked","onUpdate:checked"])]),a("div",Da,[F(De,{checked:!!s.regexp,"onUpdate:checked":S=>v(s,S)},null,8,["checked","onUpdate:checked"])]),a("div",Va,[F(De,{checked:!!s.caseSensitive,"onUpdate:checked":S=>E(s,S)},null,8,["checked","onUpdate:checked"])]),a("div",Pa,[Ie(a("input",{"onUpdate:modelValue":S=>s.color=S,type:"color",onInput:S=>I(s,S)},null,40,La),[[It,s.color]])]),a("div",{ref_for:!0,ref_key:"interactRef",ref:p,name:"interact"},[a("button",{ref_for:!0,ref:"soundEffectButton",class:Ue(["sound-button",{"has-sound":!!s.soundFile}]),tabindex:"0"},[Ie(F(Ma,null,null,512),[[l,"Set Custom Sound"]]),a("div",Ha,[(W=p.value)!=null&&W[H]?(h(),Z(Qt,{key:0,anchor:p.value[H]},{default:ce(()=>[a("button",{active:!s.soundPath&&!s.soundFile,onClick:S=>b(s)}," No Sound ",8,Oa),a("button",{active:!!s.soundPath&&!s.soundFile,onClick:S=>x(s)}," Default Sound ",8,Aa),a("button",{active:!!s.soundFile},[a("label",null,[J(" Custom Sound"+V(s.soundFile?"":"...")+" ",1),s.soundFile?(h(),g("p",Ua,V(s.soundFile.name),1)):q("",!0),a("input",{type:"file",accept:"audio/midi, audio/mpeg, audio/ogg, audio/wav, audio/webm, audio/vorbis, audio/ogg",onInput:S=>_(s,S)},null,40,Fa)])],8,Na)]),_:2},1032,["anchor"])):q("",!0)])],2),Ie(F(Xt,{tabindex:"0",onClick:S=>R(s)},null,8,["onClick"]),[[l,"Remove"]])],512)])}),128))]),_:1}),a("div",Ba,[a("div",Ga,[F(Ve,{modelValue:d.value,"onUpdate:modelValue":C[0]||(C[0]=s=>d.value=s),label:"New Highlight..."},{default:ce(()=>[J(" hi ")]),_:1},8,["modelValue"])])])])])}}});const Wa=N(za,[["__scopeId","data-v-a22bf14e"]]),ja={infer:"Infer",12:"12-hour",24:"24-hour"},Ya=Object.entries(ja).map(([e,t])=>[t,e]),Ka=[M("general.blur_unlisted_emotes","TOGGLE",{path:["General",""],label:"Hide Unlisted Emotes",hint:"If checked, emotes which have not yet been approved for listing on 7tv.app will be blurred",defaultValue:!1}),M("chat.emote_margin","SLIDER",{path:["Chat","Style"],label:"Emote Spacing",hint:"Choose the margin around emotes in chat. Negative values lets them overlap and keep the chatlines inline. 0 Makes the emotes not overlap at all",options:{min:-1,max:1,step:.1,unit:"rem"},defaultValue:-.5,effect(e){document.documentElement.style.setProperty("--seventv-emote-margin",`${e}rem`)}}),M("chat.emote_scale","SLIDER",{path:["Chat","Style"],label:"Emote Scale",ffz_key:"chat.emotes.2x",ffz_transform(e){return typeof e=="number"&&e>0?2:1},hint:"Change how large emotes should be in chat, as a multiple of their original size.",options:{min:.25,max:3,step:.25,unit:"x"},defaultValue:1}),M("chat.show_emote_modifiers","TOGGLE",{path:["Chat","Style"],label:"Show Emote Modifiers",hint:"Show text pollution from BTTV and FFZ emote modifiers (!w, ffzHyper, etc.). Modifiers are not supported yet, this setting only affects the display of their text form",defaultValue:!1}),M("chat.mod_slider","TOGGLE",{path:["Chat","Moderation"],label:"Mod Slider",hint:"Enable the mod slider in channels where you are moderator",defaultValue:!0}),M("chat.mod_messages","TOGGLE",{path:["Chat","Moderation"],label:"Moderation Messages",hint:"If enabled, you will see timeouts/bans in the chat even if you are not a moderator",defaultValue:!1}),M("chat.ignore_clear_chat","TOGGLE",{path:["Chat","Moderation"],label:"Ignore Clear Chat",hint:"If enabled, messages will be kept intact when a moderator clears the chat",defaultValue:!0}),M("chat.slash_me_style","DROPDOWN",{path:["Chat","Style"],label:"/me Style",hint:"How the /me type messages should be displayed",options:[["Nothing",0],["Italic",1],["Colored",2],["Italic + Colored",3]],defaultValue:2}),M("chat.message_batch_duration","SLIDER",{path:["Chat","Performance"],label:"Message Batching",hint:"The time to wait between rendering new messages. Higher values may improve performance and readability, at the cost of chat feeling less responsive",options:{min:25,max:1e3,step:25,unit:"ms",named_thresolds:[[0,50,"Instant"],[50,250,"Fast"],[250,500,"Balanced"],[500,999,"Slow"],[1e3,1e3,"PowerPoint Presentation"]]},defaultValue:150}),M("chat.smooth_scroll_duration","SLIDER",{path:["Chat","Performance"],label:"Smooth scroll chat",hint:"Smoothly scroll new messages into view. This may impact performance.",options:{min:0,max:1500,step:100,unit:"ms"},defaultValue:0}),M("chat.line_limit","SLIDER",{path:["Chat","Performance"],label:"Message Buffer Capacity",hint:"Define the maximum amount of messages displayed in chat. Higher values may affect performance",options:{min:50,max:1e3,step:10,unit:"lines",named_thresolds:[[0,750,""],[751,1e3,"Performance Warning!"]]},defaultValue:150}),M("ui.compact_tooltips","TOGGLE",{path:["Appearance","Style"],label:"Compact tooltips",hint:"Make the tooltips compact instead of showing the full emote",defaultValue:!1}),M("chat.alternating_background","TOGGLE",{path:["Chat","Style"],ffz_key:"chat.lines.alternate",label:"Alternating Background",hint:"Display chat lines with alternating background colors",defaultValue:!1}),M("chat.padding","DROPDOWN",{path:["Chat","Style"],label:"Padding Style",ffz_key:"chat.lines.padding",ffz_transform(e){return e?1:0},effect(e){document.body.style.setProperty("--seventv-chat-padding",{0:"0.25rem",1:"1rem"}[e]??null)},hint:"Change the padding style of chat lines",options:[["Full-Width",0],["Native (Twitch-like)",1]],defaultValue:1}),M("chat.font_size","SLIDER",{path:["Chat","Style"],label:"Font Size",ffz_key:"chat.font-size",ffz_transform(e){return typeof e=="number"?e:13},effect(e){typeof e=="number"&&(e!==13?document.body.style.setProperty("--seventv-chat-font-size",`${e}px`):document.body.style.removeProperty("--seventv-chat-font-size"))},hint:"Change the size of text in chat, when set to default the size will be inferred from Twitch appearence settings",options:{min:1,max:30,step:1,unit:"px",named_values:[[13,13,"Default"]]},defaultValue:13}),M("chat.colored_mentions","TOGGLE",{path:["Chat","Style"],label:"Colored Mentions",hint:"Show the color of users mentioned in chat",defaultValue:!0}),M("chat.deleted_messages","DROPDOWN",{path:["Chat","Style"],label:"Deleted Message Style",hint:"Control how deleted messages are displayed in chat",effect(e){switch(document.body.style.removeProperty("--seventv-chat-deleted-display"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0.5"),document.body.style.setProperty("--seventv-chat-deleted-prefix","â€”"),e){case 0:document.body.style.setProperty("--seventv-chat-deleted-decoration","none"),document.body.style.setProperty("--seventv-chat-deleted-opacity","0"),document.body.style.setProperty("--seventv-chat-deleted-display","none"),document.body.style.setProperty("--seventv-chat-deleted-prefix","");break;case 1:document.body.style.setProperty("--seventv-chat-deleted-decoration","none");break;case 2:document.body.style.setProperty("--seventv-chat-deleted-decoration","line-through");break;case 3:document.body.style.removeProperty("--seventv-chat-deleted-decoration"),document.body.style.removeProperty("--seventv-chat-deleted-opacity");break}},options:[["Hidden",0],["Dimmed",1],["Strikethrough",2],["Keep",3]],defaultValue:1}),M("chat.timestamp_with_seconds","TOGGLE",{path:["Chat","Style"],label:"Timestamp Seconds",hint:"If checked, timestamps in chat will also show seconds",defaultValue:!1}),M("chat.timestamp_format","DROPDOWN",{path:["Chat","Style"],label:"Timestamp Format",defaultValue:"infer",hint:"Infer will get the format from the current locale.",options:Ya}),M("chat.user_card","TOGGLE",{path:["Chat","Tools"],label:"Improve the User Card",hint:"Replace the default user card with a faster, more useful version",defaultValue:!0}),M("chat.copy_icon_toggle","TOGGLE",{path:["Chat","Tools"],label:"Copy Icon",hint:"Show a 'Copy' icon when hovering over a chat message to copy the message",defaultValue:!0}),M("highlights.basic.mention","TOGGLE",{path:["Highlights","Built-In"],label:"Show Mention Highlights",hint:"Whether or not to highlight messages that mention or reply to you in chat",defaultValue:!0}),M("highlights.basic.mention_sound","TOGGLE",{path:["Highlights","Built-In"],label:"Play Sound on Mention",hint:"Play a sound when you are mentioned in chat",disabledIf:()=>!j("highlights.basic.mention").value,defaultValue:!1}),M("highlights.basic.mention_title_flash","TOGGLE",{path:["Highlights","Built-In"],label:"Flash Title on Mention",hint:"When tabbed out, the username of users who mention you will flash in the title",disabledIf:()=>!j("highlights.basic.mention").value,defaultValue:!0}),M("highlights.basic.monitored_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Monitored Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a monitored suspicious user",defaultValue:!0}),M("highlights.basic.restricted_low_trust_user","TOGGLE",{path:["Highlights","Built-In"],label:"Show Restricted Suspicious User Highlights (Moderator only)",hint:"Whether or not to highlight users who are a restricted suspicious user",defaultValue:!0}),M("highlights.basic.first_time_chatter","TOGGLE",{path:["Highlights","Built-In"],label:"Show First-Time Chatter Highlights",hint:"Whether or not to highlight users who are chatting for the first time",defaultValue:!0}),M("highlights.basic.self","TOGGLE",{path:["Highlights","Built-In"],label:"Show Highlights for Your Own Messages",hint:"Whether or not to highlight messages sent by yourself",defaultValue:!1}),M("highlights.custom","CUSTOM",{path:["Highlights",""],custom:{component:nt(Wa),gridMode:"new-row"},label:"Custom Highlights",hint:"Create custom highlights for specific words or phrases",defaultValue:new Map}),M("highlights.sound_volume","SLIDER",{path:["Highlights","Built-In"],label:"Highlight Sound Volume",hint:"Control the volume at which sound plays upon being mentioned",options:{min:0,max:100,step:1,unit:"%"},defaultValue:75}),M("highlights.display_style","DROPDOWN",{path:["Highlights","Style"],label:"Highlighted Message Style",hint:"Choose how or if, to show highlighted messages in chat",options:[["Standard",0],["Minimal (Solid color)",1],["None (No visual)",2]],defaultValue:0}),M("highlights.opacity","SLIDER",{path:["Highlights","Style"],label:"Highlight Opacity",hint:"Change how bright highlights apear in chat",options:{min:0,max:100,step:1},defaultValue:10}),M("vanity.nametag_paints","TOGGLE",{path:["Appearance","Vanity"],label:"Nametag Paints",hint:"Whether or not to display nametag paints",defaultValue:!0})],qa=B({__name:"ChatModule",setup(e,{expose:t}){const{dependenciesMet:o,markAsReady:d}=Lt("chat",{name:"Chat",depends_on:[]}),i=le(new WeakMap),p=_e({parentSelector:".chat-room__content",maxDepth:100,predicate:_=>{var x;return((x=_.props)==null?void 0:x.primaryColorHex)!==void 0}}),u=_e({parentSelector:".chat-room__content",maxDepth:100,predicate:_=>_.scrollRef},{trackRoot:!0,hooks:{render:function(_){return _.component.props.children.map(b=>b.key?Vt(_,b.key,b):null)}}}),T=_e({parentSelector:".chat-shell, .stream-chat",maxDepth:250,predicate:_=>{var x;return _.pushMessage&&((x=_.props)==null?void 0:x.messageHandlerAPI)}},{hooks:{update(_){i.set(_,!!_.component.props.channelID)}}}),L=_e({parentSelector:".stream-chat",maxDepth:250,predicate:_=>_.prependHistoricalMessages&&_.buffer&&_.blockedUsers}),v=_e({parentSelector:".stream-chat",maxDepth:250,predicate:_=>_.onClearChatEvent}),E=P(!1),I=He(E,200);return z(()=>[T.instances,T.instances],([_,x])=>E.value=_.length===x.length,{immediate:!0}),d(),t({chatController:T,chatList:u,chatRoom:p,messageSendMiddleware:new Map}),(_,x)=>(h(!0),g(Q,null,Te(k(T).instances,(b,R)=>(h(),g(Q,{key:b.identifier},[k(o)&&k(I)&&i.get(b)?(h(),Z(_a,{key:0,list:k(u).instances[0]??void 0,controller:k(T).instances[R],room:k(p).instances[0]??void 0,buffer:k(L).instances[0]??void 0,events:k(v).instances[0]??void 0},null,8,["list","controller","room","buffer","events"])):q("",!0)],64))),128))}}),go=Object.freeze(Object.defineProperty({__proto__:null,config:Ka,default:qa},Symbol.toStringTag,{value:"Module"}));export{go as _};
